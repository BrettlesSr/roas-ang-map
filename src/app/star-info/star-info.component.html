<mat-tab-group *ngIf="starInfo" mat-align-tabs="center">
    <mat-tab label="{{starInfo.name}}">

        <div *ngIf="starInfo.thumbnail.length > 0" class="tab-content" class="image-container">
            <img src="{{starInfo.thumbnail}}" width=480px>
        </div>

        <div *ngIf="filteredTerritories && filteredTerritories.length > 0"  class="title">
            Territories In {{starInfo.name}}
        </div>
        
        <div *ngFor="let territory of filteredTerritories" class="tab-content">

            <div>
                <a *ngIf="territory.threadlink" href="{{territory.threadlink}}" target="_blank">{{territory.name}} <i class="fas fa-external-link-alt fa-xs"></i></a>
                <div *ngIf="!territory.threadlink" class="non-link">{{territory.name}}</div>
            </div>
            <div class="image-container">
                <img src="{{territory.thumbnail}}" width="480px">
            </div>
            <div>
                {{shortened(territory.description, 200)}}
            </div>
            <div>
                <mat-chip-list>
                    <mat-chip color="primary" (click)="openPolity(territory.owner)"> {{territory.owner}}</mat-chip>
                </mat-chip-list>
            </div>
        </div>

    </mat-tab>

    <mat-tab label="History" *ngIf="orderedHistory && orderedHistory.length > 0">

        <div class="title">
            History Of {{starInfo.name}}
        </div>

        <div *ngFor="let history of orderedHistory" class="tab-content">

            <div>
                <a *ngIf="history.threadlink" href="{{history.threadlink}}" target="_blank">{{getHistoryDescriptor(history.name, history.date)}} <i class="fas fa-external-link-alt fa-xs"></i></a>
                <div *ngIf="!history.threadlink" class="non-link">{{getHistoryDescriptor(history.name, history.date)}}</div>
            </div>
            <div class="image-container">
                <img src="{{history.thumbnail}}" width="460px">
            </div>            
            <div>
                {{history.description}}
            </div>
            <div>
                <mat-chip-list>
                    <mat-chip *ngFor="let polity of history.politiesInvolved" color="primary" (click)="openPolity(polity)"> {{polity}}</mat-chip>
                </mat-chip-list>
            </div>
        </div>

    </mat-tab>

    <mat-tab label="Trade" *ngIf="starInfo.nodesPresent > 0">

        <div class="title">
            {{starInfo.name}} Trade Nodes
        </div>
    
        <div class="tab-content">    
            <div>
                <div class="non-link">Trade Node</div>
            </div>        
            <div>
                This system contains {{starInfo.nodesPresent}} Trade Node(s).
                It can support freighters providing up to {{starInfo.nodesPresent * 25}}% of a state's territorial income (twice that for Merchant Marine).
                This mechanic is undergoing revision for the year 2753 and onwards.
            </div>
        </div>

    </mat-tab>
    
  </mat-tab-group>
